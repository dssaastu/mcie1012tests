<!DOCTYPE html>
<html lang="en">
<head>
    <!-- IMPORTANT: Make sure your text editor saves this file with UTF-8 Encoding! -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civics and Ethics chaper 1 Quiz </title> <!-- Changed Title -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="password"] { width: 100%; padding: 8px; box-sizing: border-box; }
        input[type="radio"] { margin-right: 5px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; margin-right: 10px; border-radius: 5px; }
        button:hover { background-color: #0056b3; }
        .hidden { display: none; }
        #error-message, #password-error, #login-error { color: red; font-size: 1.2em; text-align: center; }
        #success-message { color: green; font-size: 1.2em; text-align: center; }
        #results, #review-section, #submission-copy { margin-top: 20px; text-align: left; border: 1px solid #ccc; padding: 15px; border-radius: 5px; background-color: #f9f9f9;}
        #password-section, #login-section { text-align: center; max-width: 400px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 5px; background-color: #f9f9f9;}
        #password-section input[type="password"], #login-section input[type="text"], #login-section input[type="password"] { width: calc(100% - 18px); }
        .question-result { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        #download-pdf, #download-response { margin-top: 10px; }
        #score { font-weight: bold; text-align: center; color: green; font-size: 1.4em; margin-top: 20px; }
        #review-section h2, #submission-copy h2, #results h1 { margin-bottom: 15px; text-align: center; color: #007bff;}
        #review-section button, #submission-copy button, #password-section button, #login-section button, #results button { margin-top: 15px; }
        .choices p { margin: 2px 0 2px 20px; }
    </style>
</head>
<body>
    <div id="login-section">
        <h1>Login to Access Quiz</h1>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" placeholder="Enter username" required>
        </div>
        <div class="form-group">
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" placeholder="Enter password" required>
        </div>
        <button onclick="checkLogin()">Login</button>
        <p id="login-error" class="hidden">Incorrect username or password. Please try again.</p>
    </div>

    <div id="quiz-form" class="hidden">
        <h1>Civics and Ethics Quiz</h1> <!-- Changed Title -->
        <form id="mcie-quiz"> <!-- ID Kept, but content changed -->
            <!-- Student Information -->
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="id_number">ID Number:</label>
                <input type="text" id="id_number" name="id_number" required>
            </div>
            <div class="form-group">
                <label for="section">Section:</label>
                <input type="text" id="section" name="section" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <!-- Civics and Ethics Multiple-Choice Questions -->
            <div class="form-group">
                 <label>1. Civic education is fundamentally concerned with:</label>
                 <input type="radio" name="q1" value="A" required> A) The history of ancient civilizations.<br>
                 <input type="radio" name="q1" value="B"> B) The rights and responsibilities of citizens within a political entity.<br>
                 <input type="radio" name="q1" value="C"> C) The study of international relations and diplomacy.<br>
                 <input type="radio" name="q1" value="D"> D) The development of advanced scientific principles.
             </div>
             <div class="form-group">
                 <label>2. The concept of a "good citizen" implies that citizenship qualities are:</label>
                 <input type="radio" name="q2" value="A" required> A) Inherited genetically.<br>
                 <input type="radio" name="q2" value="B"> B) Primarily developed through economic success.<br>
                 <input type="radio" name="q2" value="C"> C) Learned and developed, not inherent at birth.<br>
                 <input type="radio" name="q2" value="D"> D) Only relevant in monarchical systems of government.
             </div>
             <div class="form-group">
                 <label>3. Patrick's (1986) definition of civic education primarily emphasizes:</label>
                 <input type="radio" name="q3" value="A" required> A) Physical fitness and community service.<br>
                 <input type="radio" name="q3" value="B"> B) Economic literacy and market principles.<br>
                 <input type="radio" name="q3" value="C"> C) Knowledge of constitutions, principles, values, and history.<br>
                 <input type="radio" name="q3" value="D"> D) Artistic expression and cultural heritage.
             </div>
             <div class="form-group">
                 <label>4. Minimal civic education is characterized by:</label>
                 <input type="radio" name="q4" value="A" required> A) Interactive teaching and community projects.<br>
                 <input type="radio" name="q4" value="B"> B) A focus on active, responsible participation.<br>
                 <input type="radio" name="q4" value="C"> C) Content-led, teacher-based instruction and exams.<br>
                 <input type="radio" name="q4" value="D"> D) Learning extended beyond the classroom into society.
             </div>
             <div class="form-group">
                 <label>5. Maximal civic education aims to prepare students primarily for:</label>
                 <input type="radio" name="q5" value="A" required> A) Passing standardized content examinations.<br>
                 <input type="radio" name="q5" value="B"> B) Active and responsible participation in civic life.<br>
                 <input type="radio" name="q5" value="C"> C) Understanding historical political figures.<br>
                 <input type="radio" name="q5" value="D"> D) Careers in government administration.
             </div>
             <div class="form-group">
                 <label>6. Ethics, as a branch of philosophy, seeks to understand:</label>
                 <input type="radio" name="q6" value="A" required> A) The physical laws governing the universe.<br>
                 <input type="radio" name="q6" value="B"> B) The aesthetic principles of art and beauty.<br>
                 <input type="radio" name="q6" value="C"> C) People's moral beliefs, actions, and values.<br>
                 <input type="radio" name="q6" value="D"> D) The linguistic structure of different languages.
             </div>
             <div class="form-group">
                 <label>7. The terms 'ethics' and 'morality' are used interchangeably, but traditionally 'ethics' refers more to:</label>
                 <input type="radio" name="q7" value="A" required> A) An individual's gut feelings about right and wrong.<br>
                 <input type="radio" name="q7" value="B"> B) The process of thinking about morality or a specific code.<br>
                 <input type="radio" name="q7" value="C"> C) The universally accepted laws of a society.<br>
                 <input type="radio" name="q7" value="D"> D) The emotional responses to societal events.
             </div>
             <div class="form-group">
                 <label>8. Ethical questions are distinct from psychological questions because they focus on:</label>
                 <input type="radio" name="q8" value="A" required> A) What people actually do.<br>
                 <input type="radio" name="q8" value="B"> B) What motivates human behavior.<br>
                 <input type="radio" name="q8" value="C"> C) What people ought to do.<br>
                 <input type="radio" name="q8" value="D"> D) How cognitive biases affect decisions.
             </div>
             <div class="form-group">
                 <label>9. While often used synonymously in contexts like 'business ethics', a precise distinction reserves 'morality' for:</label>
                 <input type="radio" name="q9" value="A" required> A) The philosophical study of values.<br>
                 <input type="radio" name="q9" value="B"> B) The specific code followed by a profession.<br>
                 <input type="radio" name="q9" value="C"> C) The actual conduct or character itself.<br>
                 <input type="radio" name="q9" value="D"> D) The legal framework governing actions.
             </div>
             <div class="form-group">
                 <label>10. Morality, derived from the Latin 'moralitas', fundamentally pertains to:</label>
                 <input type="radio" name="q10" value="A" required> A) Economic transactions and fairness.<br>
                 <input type="radio" name="q10" value="B"> B) Proper behavior concerning right and wrong.<br>
                 <input type="radio" name="q10" value="C"> C) Political power and its distribution.<br>
                 <input type="radio" name="q10" value="D"> D) Scientific methods and discovery.
             </div>
             <div class="form-group">
                 <label>11. Socrates' statement "We are discussing no small matter, but how we ought to live" highlights the significance of:</label>
                 <input type="radio" name="q11" value="A" required> A) Political strategy.<br>
                 <input type="radio" name="q11" value="B"> B) Economic planning.<br>
                 <input type="radio" name="q11" value="C"> C) Morality and ethical living.<br>
                 <input type="radio" name="q11" value="D"> D) Scientific inquiry.
             </div>
             <div class="form-group">
                 <label>12. A key element of morality described as "the effort to guide one's conduct by reason" also emphasizes:</label>
                 <input type="radio" name="q12" value="A" required> A) Prioritizing one's own interests above all else.<br>
                 <input type="radio" name="q12" value="B"> B) Following traditional customs without question.<br>
                 <input type="radio" name="q12" value="C"> C) Giving equal weight to the interests of affected individuals.<br>
                 <input type="radio" name="q12" value="D"> D) Relying solely on emotional intuition for decisions.
             </div>
             <div class="form-group">
                 <label>13. How does  generally  ethics and morality contrast in a simple framework?</label>
                 <input type="radio" name="q13" value="A" required> A) Ethics is practical; morality is theoretical.<br>
                 <input type="radio" name="q13" value="B"> B) Ethics relates to personal feelings; morality relates to societal rules.<br>
                 <input type="radio" name="q13" value="C"> C) Ethics is the theory/study; morality is the practice/conduct.<br>
                 <input type="radio" name="q13" value="D"> D) Ethics is universal; morality is culturally specific.
             </div>
             <div class="form-group">
                 <label>14. One crucial difference between ethics and law is that:</label>
                 <input type="radio" name="q14" value="A" required> A) Ethics is always codified, while laws are often unwritten.<br>
                 <input type="radio" name="q14" value="B"> B) Laws are formally approved by state authorities, while ethics may not be.<br>
                 <input type="radio" name="q14" value="C"> C) Breaking a law always carries ethical weight, but violating ethics never has legal consequences.<br>
                 <input type="radio" name="q14" value="D"> D) Ethics focuses only on intentions, while law focuses only on outcomes.
             </div>
             <div class="form-group">
                 <label>15. The example of speeding to take someone to the hospital illustrates that:</label>
                 <input type="radio" name="q15" value="A" required> A) All laws are ethically sound.<br>
                 <input type="radio" name="q15" value="B"> B) Illegal actions can sometimes be ethically justifiable.<br>
                 <input type="radio" name="q15" value="C"> C) Ethical obligations always require breaking the law.<br>
                 <input type="radio" name="q15" value="D"> D) The law is irrelevant in emergency situations.
             </div>
             <div class="form-group">
                 <label>16. The existence of past laws permitting slavery demonstrates that:</label>
                 <input type="radio" name="q16" value="A" required> A) Laws can be unethical or immoral.<br>
                 <input type="radio" name="q16" value="B"> B) Morality is solely determined by the legal system.<br>
                 <input type="radio" name="q16" value="C"> C) All historical laws should be respected today.<br>
                 <input type="radio" name="q16" value="D"> D) Ethics and law were identical in the past.
             </div>
             <div class="form-group">
                 <label>17. Enforcement of laws typically involves state coercion, whereas enforcement of ethical standards often relies on:</label>
                 <input type="radio" name="q17" value="A" required> A) Physical punishment administered by citizens.<br>
                 <input type="radio" name="q17" value="B"> B) Mandatory fines determined by philosophical committees.<br>
                 <input type="radio" name="q17" value="C"> C) Social disapproval or condemnation of behavior.<br>
                 <input type="radio" name="q17" value="D"> D) International courts and tribunals.
             </div>
             <div class="form-group">
                 <label>18. A primary goal of teaching civics and ethics in Ethiopian higher education is to foster understanding of:</label>
                 <input type="radio" name="q18" value="A" required> A) International trade agreements.<br>
                 <input type="radio" name="q18" value="B"> B) Advanced scientific research methods.<br>
                 <input type="radio" name="q18" value="C"> C) Democratic culture, constitutionalism, and citizen duties.<br>
                 <input type="radio" name="q18" value="D"> D) Ancient philosophical traditions exclusively.
             </div>
             <div class="form-group">
                 <label>19. The idea that rights and duties are "two sides of the same coin" means that:</label>
                 <input type="radio" name="q19" value="A" required> A) Citizens only have rights, not duties.<br>
                 <input type="radio" name="q19" value="B"> B) The state only has duties, not rights.<br>
                 <input type="radio" name="q19" value="C"> C) Individual rights often correspond to responsibilities or duties (of self or others).<br>
                 <input type="radio" name="q19" value="D"> D) Rights and duties are entirely separate concepts.
             </div>
             <div class="form-group">
                 <label>20. According to the points presented from Sastry et al., an individual's right generally implies:</label>
                 <input type="radio" name="q20" value="A" required> A) That the right can be exercised without any limitations.<br>
                 <input type="radio" name="q20" value="B"> B) A corresponding duty on others to respect that right.<br>
                 <input type="radio" name="q20" value="C"> C) That the state has no role in protecting rights.<br>
                 <input type="radio" name="q20" value="D"> D) That duties are more important than rights.
             </div>
             <div class="form-group">
                 <label>21. Exercising one's rights for the promotion of social good implies that:</label>
                 <input type="radio" name="q21" value="A" required> A) Rights can be misused, potentially requiring state intervention.<br>
                 <input type="radio" name="q21" value="B"> B) Individuals have unlimited freedom regardless of impact.<br>
                 <input type="radio" name="q21" value="C"> C) Social good is irrelevant to the concept of rights.<br>
                 <input type="radio" name="q21" value="D"> D) Only the state can determine what constitutes social good.
             </div>
             <div class="form-group">
                 <label>22. Political culture refers to:</label>
                 <input type="radio" name="q22" value="A" required> A) The artistic expressions related to political themes.<br>
                 <input type="radio" name="q22" value="B"> B) The formal structure of government institutions.<br>
                 <input type="radio" name="q22" value="C"> C) The set of attitudes, beliefs, and norms governing political behavior.<br>
                 <input type="radio" name="q22" value="D"> D) The history of political parties within a nation.
             </div>
             <div class="form-group">
                 <label>23. In Almond and Verba's model, a 'parochial' political culture is characterized by:</label>
                 <input type="radio" name="q23" value="A" required> A) High levels of citizen participation in politics.<br>
                 <input type="radio" name="q23" value="B"> B) Strong attachment to political parties and ideologies.<br>
                 <input type="radio" name="q23" value="C"> C) Low awareness and orientation towards the national political system.<br>
                 <input type="radio" name="q23" value="D"> D) Intense focus on policy outputs and government services.
             </div>
             <div class="form-group">
                 <label>24. A 'subject' political culture, according to Almond and Verba, involves:</label>
                 <input type="radio" name="q24" value="A" required> A) Citizens actively trying to influence policy inputs.<br>
                 <input type="radio" name="q24" value="B"> B) High orientation towards the system's outputs but passive participation.<br>
                 <input type="radio" name="q24" value="C"> C) Complete lack of awareness of the central government.<br>
                 <input type="radio" name="q24" value="D"> D) Strong engagement in local community affairs only.
             </div>
             <div class="form-group">
                 <label>25. The 'participant' political culture is considered most compatible with democracy because it involves:</label>
                 <input type="radio" name="q25" value="A" required> A) Citizens blindly following political leaders.<br>
                 <input type="radio" name="q25" value="B"> B) High levels of citizen awareness, engagement, and sense of political efficacy.<br>
                 <input type="radio" name="q25" value="C"> C) Focus solely on the economic benefits provided by the state.<br>
                 <input type="radio" name="q25" value="D"> D) Rejection of all forms of governmental authority.
             </div>
             <div class="form-group">
                 <label>26. A potential challenge for democratization mentioned is when citizens primarily see themselves as:</label>
                 <input type="radio" name="q26" value="A" required> A) Active agents of political change.<br>
                 <input type="radio" name="q26" value="B"> B) Recipients or consumers of government services, rather than active participants.<br>
                 <input type="radio" name="q26" value="C"> C) Obligated to participate in all political decisions.<br>
                 <input type="radio" name="q26" value="D"> D) Entirely independent of the state.
             </div>
             <div class="form-group">
                 <label>27. Active citizenship, as described, extends beyond voting to include:</label>
                 <input type="radio" name="q27" value="A" required> A) Only activities mandated by the government.<br>
                 <input type="radio" name="q27" value="B"> B) Socio-cultural and environmental activities supporting the community.<br>
                 <input type="radio" name="q27" value="C"> C) Complete withdrawal from political life.<br>
                 <input type="radio" name="q27" value="D"> D) Activities aimed solely at personal financial gain.
             </div>
             <div class="form-group">
                 <label>28. The importance of "relevant knowledge, skills, and positive attitudes" suggests that:</label>
                 <input type="radio" name="q28" value="A" required> A) Knowledge alone guarantees responsible citizenship.<br>
                 <input type="radio" name="q28" value="B"> B) Positive attitudes can compensate for a lack of skills.<br>
                 <input type="radio" name="q28" value="C"> C) Effective citizenship requires a combination of understanding, ability, and disposition.<br>
                 <input type="radio" name="q28" value="D"> D) Skills are innate and cannot be taught.
             </div>
             <div class="form-group">
                 <label>29. skillful manpower lacking positive attitudes might lead to:</label>
                 <input type="radio" name="q29" value="A" required> A) Increased national productivity.<br>
                 <input type="radio" name="q29" value="B"> B) Greater innovation and creativity.<br>
                 <input type="radio" name="q29" value="C"> C) Problems like corruption, bribery, and absenteeism.<br>
                 <input type="radio" name="q29" value="D"> D) More efficient government services.
             </div>
             <div class="form-group">
                 <label>30. The concept of 'inter-culturalism' in civic education is presented as a step beyond multiculturalism by emphasizing:</label>
                 <input type="radio" name="q30" value="A" required> A) Segregation of different cultural groups.<br>
                 <input type="radio" name="q30" value="B"> B) Assimilation of minority cultures into the dominant one.<br>
                 <input type="radio" name="q30" value="C"> C) Dynamic exchange, dialogue, and reciprocity between cultures.<br>
                 <input type="radio" name="q30" value="D"> D) Simply acknowledging the existence of diverse cultures.
             </div>
             <div class="form-group">
                 <label>31. Addressing 'inclusiveness' in civics and ethics aims to:</label>
                 <input type="radio" name="q31" value="A" required> A) Maintain traditional gender roles in public and private life.<br>
                 <input type="radio" name="q31" value="B"> B) Focus solely on increasing women's quotas in formal politics.<br>
                 <input type="radio" name="q31" value="C"> C) Nurture equitable relations, recognizing gender differences in all spheres.<br>
                 <input type="radio" name="q31" value="D"> D) Exclude discussions of gender from the curriculum.
             </div>
             <div class="form-group">
                 <label>32. Civic education's contribution to 'peace-building' involves developing competencies in:</label>
                 <input type="radio" name="q32" value="A" required> A) Military strategy and tactics.<br>
                 <input type="radio" name="q32" value="B"> B) Economic negotiation and trade deals.<br>
                 <input type="radio" name="q32" value="C"> C) Peacemaking, non-violent conflict resolution, and reconciliation.<br>
                 <input type="radio" name="q32" value="D"> D) Suppressing dissent and opposition.
             </div>
             <div class="form-group">
                 <label>33. A core value promoted by Moral and Civics Education, listed explicitly, is:</label>
                 <input type="radio" name="q33" value="A" required> A) Pursuit of individual wealth above all else.<br>
                 <input type="radio" name="q33" value="B"> B) Unquestioning obedience to authority.<br>
                 <input type="radio" name="q33" value="C"> C) Respect for diversity.<br>
                 <input type="radio" name="q33" value="D"> D) Strict adherence to tradition.
             </div>
             <div class="form-group">
                 <label>34.  Democracy requires ___________ from its citizens for it to be vibrant.</label>
                 <input type="radio" name="q34" value="A" required> A) Apathy and disengagement<br>
                 <input type="radio" name="q34" value="B"> B) Financial contributions only<br>
                 <input type="radio" name="q34" value="C"> C) Engagement and participation<br>
                 <input type="radio" name="q34" value="D"> D) Uniformity of opinion
             </div>
             <div class="form-group">
                 <label>35. The need to "revitalize" citizenship education stems partly from:</label>
                 <input type="radio" name="q35" value="A" required> A) An overemphasis on active participation in the past.<br>
                 <input type="radio" name="q35" value="B"> B) A perceived neglect of the field and the need for democratic citizenship focus.<br>
                 <input type="radio" name="q35" value="C"> C) The success of purely teacher-centered instruction methods.<br>
                 <input type="radio" name="q35" value="D"> D) The irrelevance of civics in modern society.
             </div>
             <div class="form-group">
                 <label>36. The chapter summary defines morality broadly as a set of:</label>
                 <input type="radio" name="q36" value="A" required> A) Legally binding regulations only.<br>
                 <input type="radio" name="q36" value="B"> B) Personal and social values, rules, and beliefs governing conduct.<br>
                 <input type="radio" name="q36" value="C"> C) Innate instincts shared by all humans.<br>
                 <input type="radio" name="q36" value="D"> D) Philosophical arguments understandable only by experts.
             </div>
             <div class="form-group">
                 <label>37. A major goal of civics and ethics, reiterated in the summary, is producing citizens who:</label>
                 <input type="radio" name="q37" value="A" required> A) Question all forms of authority.<br>
                 <input type="radio" name="q37" value="B"> B) Prioritize personal interests over societal needs.<br>
                 <input type="radio" name="q37" value="C"> C) Obey the law and contribute positively to society.<br>
                 <input type="radio" name="q37" value="D"> D) Focus exclusively on theoretical knowledge.
             </div>
             <div class="form-group">
                 <label>38. Invoking Socrates' idea of the "unexamined life" in the context of ethics education highlights the value of:</label>
                 <input type="radio" name="q38" value="A" required> A) Accepting dogma without question.<br>
                 <input type="radio" name="q38" value="B"> B) Avoiding difficult life experiences.<br>
                 <input type="radio" name="q38" value="C"> C) Self-critique and ethical reflection.<br>
                 <input type="radio" name="q38" value="D"> D) Focusing solely on practical skills.
             </div>
             <div class="form-group">
                 <label>39. The "new vision for education" mentioned in the summary advocates for a shift from rote learning towards:</label>
                 <input type="radio" name="q39" value="A" required> A) Memorization of historical facts.<br>
                 <input type="radio" name="q39" value="B"> B) Skills acquisition relevant for life and society.<br>
                 <input type="radio" name="q39" value="C"> C) Theoretical philosophical debates.<br>
                 <input type="radio" name="q39" value="D"> D) Physical education and sports.
             </div>
             <div class="form-group">
                 <label>40. The ultimate aim of this type of ethics education, according to the summary, is the emergence of:</label>
                 <input type="radio" name="q40" value="A" required> A) Citizens focused solely on national traditions.<br>
                 <input type="radio" name="q40" value="B"> B) Leaders driven by values, virtues, and knowledge to transform their environment.<br>
                 <input type="radio" name="q40" value="C"> C) Individuals skilled in manipulation for personal gain.<br>
                 <input type="radio" name="q40" value="D"> D) A society where ethics is determined solely by the majority opinion.
             </div>
             <div class="form-group">
                 <label>41. The quote by Louis Gottschalk, "A Seed will only become a flower if it gets sun and water," metaphorically suggests that:</label>
                 <input type="radio" name="q41" value="A" required> A) Citizenship requires specific external conditions to flourish.<br>
                 <input type="radio" name="q41" value="B"> B) Human potential is fixed from birth.<br>
                 <input type="radio" name="q41" value="C"> C) Education is unnecessary for development.<br>
                 <input type="radio" name="q41" value="D"> D) Nature is the only determinant of character.
             </div>
             <div class="form-group">
                 <label>42. Aristotle's view that citizens should be educated to suit the constitution implies:</label>
                 <input type="radio" name="q42" value="A" required> A) Education should be independent of the state's political structure.<br>
                 <input type="radio" name="q42" value="B"> B) The purpose of civic education is aligned with the state's foundational principles.<br>
                 <input type="radio" name="q42" value="C"> C) Constitutions are obstacles to proper education.<br>
                 <input type="radio" name="q42" value="D"> D) Only philosophers should understand the constitution.
             </div>
             <div class="form-group">
                 <label>43. Aggarwal's (1982) perspective links civic education to the development of:</label>
                 <input type="radio" name="q43" value="A" required> A) Financial wealth and independence.<br>
                 <input type="radio" name="q43" value="B"> B) Ideas, habits, behaviors, and attitudes for useful societal membership.<br>
                 <input type="radio" name="q43" value="C"> C) Advanced technological proficiency.<br>
                 <input type="radio" name="q43" value="D"> D) Critical perspectives against the state.
             </div>
             <div class="form-group">
                 <label>44. The distinction between ethical 'should' and psychological 'would' emphasizes that ethics is primarily:</label>
                 <input type="radio" name="q44" value="A" required> A) Descriptive (what people do).<br>
                 <input type="radio" name="q44" value="B"> B) Predictive (what people will do).<br>
                 <input type="radio" name="q44" value="C"> C) Normative (what people ought to do).<br>
                 <input type="radio" name="q44" value="D"> D) Explanatory (why people do things).
             </div>
             <div class="form-group">
                 <label>45. In a multicultural society like Ethiopia, understanding and applying morality can be complex due to:</label>
                 <input type="radio" name="q45" value="A" required> A) The lack of any shared values.<br>
                 <input type="radio" name="q45" value="B"> B) The uniformity of cultural norms across all groups.<br>
                 <input type="radio" name="q45" value="C"> C) The diversity of cultural backgrounds and values.<br>
                 <input type="radio" name="q45" value="D"> D) The absence of a formal legal system.
             </div>
             <div class="form-group">
                 <label>46. The relationship between an individual's health choices (diet, exercise) and the state's ability to provide healthcare illustrates the connection between:</label>
                 <input type="radio" name="q46" value="A" required> A) Economic policy and foreign relations.<br>
                 <input type="radio" name="q46" value="B"> B) Citizen rights and citizen responsibilities.<br>
                 <input type="radio" name="q46" value="C"> C) Legal statutes and judicial precedent.<br>
                 <input type="radio" name="q46" value="D"> D) Political parties and election outcomes.
             </div>
             <div class="form-group">
                 <label>47. Teaching ethics is presented as necessary alongside teaching norms because:</label>
                 <input type="radio" name="q47" value="A" required> A) Norms are sufficient on their own to ensure ethical behavior.<br>
                 <input type="radio" name="q47" value="B"> B) Obeying rules without understanding the underlying ethical reasons may not be sufficient.<br>
                 <input type="radio" name="q47" value="C"> C) Ethics is easier to teach than norms.<br>
                 <input type="radio" name="q47" value="D"> D) Norms and ethics are fundamentally opposed concepts.
             </div>
             <div class="form-group">
                 <label>48. The phrase "educating the mind without educating the heart is no education at all" (attributed to Aristotle) suggests that education should encompass:</label>
                 <input type="radio" name="q48" value="A" required> A) Only intellectual development.<br>
                 <input type="radio" name="q48" value="B"> B) Only emotional development.<br>
                 <input type="radio" name="q48" value="C"> C) Both intellectual and moral/ethical development.<br>
                 <input type="radio" name="q48" value="D"> D) Physical training exclusively.
             </div>
             <div class="form-group">
                 <label>49. The concept of 'competences' for active citizenship (knowledge, skills, attitudes, values) implies that being an effective citizen is:</label>
                 <input type="radio" name="q49" value="A" required> A) A passive state of being.<br>
                 <input type="radio" name="q49" value="B"> B) Dependent solely on birth circumstances.<br>
                 <input type="radio" name="q49" value="C"> C) A multifaceted capability requiring various components.<br>
                 <input type="radio" name="q49" value="D"> D) Achieved simply by reaching voting age.
             </div>
             <div class="form-group">
                 <label>50. The overall purpose of including Moral and Citizenship Education in the curriculum appears to be:</label>
                 <input type="radio" name="q50" value="A" required> A) To prepare students for specific vocational jobs.<br>
                 <input type="radio" name="q50" value="B"> B) To develop knowledgeable, ethical, responsible, and active citizens.<br>
                 <input type="radio" name="q50" value="C"> C) To focus solely on the historical development of the nation.<br>
                 <input type="radio" name="q50" value="D"> D) To train students in advanced philosophical argumentation.
             </div>

            <button type="button" onclick="showReview()">Submit</button>
        </form>
        <div id="error-message" class="hidden">
            <p>Something went wrong. Please try again.</p>
        </div>
    </div>

    <div id="review-section" class="hidden">
        <h2>Review Your Answers</h2>
        <div id="review-content"></div>
        <button onclick="editForm()">Edit</button>
        <button onclick="downloadResponse()" id="download-response">Download My Response</button>
        <button onclick="confirmSubmission()">Confirm Submission</button>
    </div>

    <div id="submission-copy" class="hidden">
        <h2>Your Submitted Answers</h2>
        <div id="submission-content"></div>
        <button onclick="proceedToPassword()">Proceed</button>
    </div>

    <div id="password-section" class="hidden">
        <h1 id="success-message">Your response has been submitted</h1>
        <p>You can view your result (score) by entering the password.</p>
        <input type="password" id="password" placeholder="Enter password">
        <button onclick="checkPassword()">Submit</button>
        <p id="password-error" class="hidden">Incorrect password. Please try again.</p>
    </div>

    <div id="results" class="hidden">
        <h1>Quiz Results</h1>
        <p id="student-info"></p>
        <div id="answers"></div>
        <p id="score"></p>
        <button id="download-pdf" onclick="downloadPDF()">Download Results PDF</button>
    </div>

            <script>
        let quizData = null;
        let formData = null;
        const { jsPDF } = window.jspdf;
        const TOTAL_QUESTIONS = 50; // Total number of questions remains 50

        // *** ADD THIS LINE ***
        // Define the chapter number for THIS specific quiz file (Chapter 1)
        const CURRENT_QUIZ_CHAPTER = 1;

        // *** ADD THIS LINE ***
        // Define the course code
        const COURSE_CODE = 'MCIE1012';


        // Valid login credentials (Remains the same)
        const validCredentials = [
            { username: 'section19', password: '123' },
            { username: 'section20', password: '123' },
            { username: 'muzemuza', password: 'moh' },
            { username: 'section21', password: '123' }
            // Add more valid credentials as needed
        ];

        // **** Civics and Ethics Questions (As provided in your HTML) ****
        const allQuestionsData = {
            q1: { text: 'Civic education is fundamentally concerned with:', choices: { A: 'The history of ancient civilizations.', B: 'The rights and responsibilities of citizens within a political entity.', C: 'The study of international relations and diplomacy.', D: 'The development of advanced scientific principles.' } },
            q2: { text: 'the concept of a "good citizen" implies that citizenship qualities are:', choices: { A: 'Inherited genetically.', B: 'Primarily developed through economic success.', C: 'Learned and developed, not inherent at birth.', D: 'Only relevant in monarchical systems of government.' } },
            q3: { text: "Patrick's (1986) definition of civic education primarily emphasizes:", choices: { A: 'Physical fitness and community service.', B: 'Economic literacy and market principles.', C: 'Knowledge of constitutions, principles, values, and history.', D: 'Artistic expression and cultural heritage.' } },
            q4: { text: 'Minimal civic education is characterized by:', choices: { A: 'Interactive teaching and community projects.', B: 'A focus on active, responsible participation.', C: 'Content-led, teacher-based instruction and exams.', D: 'Learning extended beyond the classroom into society.' } },
            q5: { text: 'Maximal civic education aims to prepare students primarily for:', choices: { A: 'Passing standardized content examinations.', B: 'Active and responsible participation in civic life.', C: 'Understanding historical political figures.', D: 'Careers in government administration.' } },
            q6: { text: 'Ethics, as a branch of philosophy, seeks to understand:', choices: { A: 'The physical laws governing the universe.', B: 'The aesthetic principles of art and beauty.', C: "People's moral beliefs, actions, and values.", D: 'The linguistic structure of different languages.' } },
            q7: { text: "The terms 'ethics' and 'morality' are used interchangeably , but traditionally 'ethics' refers more to:", choices: { A: "An individual's gut feelings about right and wrong.", B: 'The process of thinking about morality or a specific code.', C: 'The universally accepted laws of a society.', D: 'The emotional responses to societal events.' } },
            q8: { text: 'Ethical questions are distinct from psychological questions because they focus on:', choices: { A: 'What people actually do.', B: 'What motivates human behavior.', C: 'What people ought to do.', D: 'How cognitive biases affect decisions.' } },
            q9: { text: "While often used synonymously in contexts like 'business ethics', a precise distinction reserves 'morality' for:", choices: { A: 'The philosophical study of values.', B: 'The specific code followed by a profession.', C: 'The actual conduct or character itself.', D: 'The legal framework governing actions.' } },
            q10: { text: "Morality, derived from the Latin 'moralitas', fundamentally pertains to:", choices: { A: 'Economic transactions and fairness.', B: 'Proper behavior concerning right and wrong.', C: 'Political power and its distribution.', D: 'Scientific methods and discovery.' } },
            q11: { text: 'Socrates\' statement "We are discussing no small matter, but how we ought to live" highlights the significance of:', choices: { A: 'Political strategy.', B: 'Economic planning.', C: 'Morality and ethical living.', D: 'Scientific inquiry.' } },
            q12: { text: 'A key element of morality described as "the effort to guide one\'s conduct by reason" also emphasizes:', choices: { A: "Prioritizing one's own interests above all else.", B: 'Following traditional customs without question.', C: 'Giving equal weight to the interests of affected individuals.', D: 'Relying solely on emotional intuition for decisions.' } },
            q13: { text: 'How does generally  ethics and morality contrast in a simple framework?', choices: { A: 'Ethics is practical; morality is theoretical.', B: 'Ethics relates to personal feelings; morality relates to societal rules.', C: 'Ethics is the theory/study; morality is the practice/conduct.', D: 'Ethics is universal; morality is culturally specific.' } },
            q14: { text: 'One crucial difference between ethics and law is that:', choices: { A: 'Ethics is always codified, while laws are often unwritten.', B: 'Laws are formally approved by state authorities, while ethics may not be.', C: 'Breaking a law always carries ethical weight, but violating ethics never has legal consequences.', D: 'Ethics focuses only on intentions, while law focuses only on outcomes.' } },
            q15: { text: 'The example of speeding to take someone to the hospital illustrates that:', choices: { A: 'All laws are ethically sound.', B: 'Illegal actions can sometimes be ethically justifiable.', C: 'Ethical obligations always require breaking the law.', D: 'The law is irrelevant in emergency situations.' } },
            q16: { text: 'The existence of past laws permitting slavery demonstrates that:', choices: { A: 'Laws can be unethical or immoral.', B: 'Morality is solely determined by the legal system.', C: 'All historical laws should be respected today.', D: 'Ethics and law were identical in the past.' } },
            q17: { text: 'Enforcement of laws typically involves state coercion, whereas enforcement of ethical standards often relies on:', choices: { A: 'Physical punishment administered by citizens.', B: 'Mandatory fines determined by philosophical committees.', C: 'Social disapproval or condemnation of behavior.', D: 'International courts and tribunals.' } },
            q18: { text: 'A primary goal of teaching civics and ethics in Ethiopian higher education is to foster understanding of:', choices: { A: 'International trade agreements.', B: 'Advanced scientific research methods.', C: 'Democratic culture, constitutionalism, and citizen duties.', D: 'Ancient philosophical traditions exclusively.' } },
            q19: { text: 'The idea that rights and duties are "two sides of the same coin" means that:', choices: { A: 'Citizens only have rights, not duties.', B: 'The state only has duties, not rights.', C: 'Individual rights often correspond to responsibilities or duties (of self or others).', D: 'Rights and duties are entirely separate concepts.' } },
            q20: { text: "According to the points presented from Sastry et al., an individual's right generally implies:", choices: { A: 'That the right can be exercised without any limitations.', B: 'A corresponding duty on others to respect that right.', C: 'That the state has no role in protecting rights.', D: 'That duties are more important than rights.' } },
            q21: { text: "Exercising one's rights for the promotion of social good implies that:", choices: { A: 'Rights can be misused, potentially requiring state intervention.', B: 'Individuals have unlimited freedom regardless of impact.', C: 'Social good is irrelevant to the concept of rights.', D: 'Only the state can determine what constitutes social good.' } },
            q22: { text: 'Political culture,  refers to:', choices: { A: 'The artistic expressions related to political themes.', B: 'The formal structure of government institutions.', C: 'The set of attitudes, beliefs, and norms governing political behavior.', D: 'The history of political parties within a nation.' } },
            q23: { text: "In Almond and Verba's model, a 'parochial' political culture is characterized by:", choices: { A: 'High levels of citizen participation in politics.', B: 'Strong attachment to political parties and ideologies.', C: 'Low awareness and orientation towards the national political system.', D: 'Intense focus on policy outputs and government services.' } },
            q24: { text: "A 'subject' political culture, according to Almond and Verba, involves:", choices: { A: 'Citizens actively trying to influence policy inputs.', B: "High orientation towards the system's outputs but passive participation.", C: 'Complete lack of awareness of the central government.', D: 'Strong engagement in local community affairs only.' } },
            q25: { text: "The 'participant' political culture is considered most compatible with democracy because it involves:", choices: { A: 'Citizens blindly following political leaders.', B: 'High levels of citizen awareness, engagement, and sense of political efficacy.', C: 'Focus solely on the economic benefits provided by the state.', D: 'Rejection of all forms of governmental authority.' } },
            q26: { text: 'A potential challenge for democratization mentioned is when citizens primarily see themselves as:', choices: { A: 'Active agents of political change.', B: 'Recipients or consumers of government services, rather than active participants.', C: 'Obligated to participate in all political decisions.', D: 'Entirely independent of the state.' } },
            q27: { text: 'Active citizenship, as described, extends beyond voting to include:', choices: { A: 'Only activities mandated by the government.', B: 'Socio-cultural and environmental activities supporting the community.', C: 'Complete withdrawal from political life.', D: 'Activities aimed solely at personal financial gain.' } },
            q28: { text: 'The importance of "relevant knowledge, skills, and positive attitudes" suggests that:', choices: { A: 'Knowledge alone guarantees responsible citizenship.', B: 'Positive attitudes can compensate for a lack of skills.', C: 'Effective citizenship requires a combination of understanding, ability, and disposition.', D: 'Skills are innate and cannot be taught.' } },
            q29: { text: ' skillful manpower lacking positive attitudes might lead to:', choices: { A: 'Increased national productivity.', B: 'Greater innovation and creativity.', C: 'Problems like corruption, bribery, and absenteeism.', D: 'More efficient government services.' } },
            q30: { text: "The concept of 'inter-culturalism' in civic education is presented as a step beyond multiculturalism by emphasizing:", choices: { A: 'Segregation of different cultural groups.', B: 'Assimilation of minority cultures into the dominant one.', C: 'Dynamic exchange, dialogue, and reciprocity between cultures.', D: 'Simply acknowledging the existence of diverse cultures.' } },
            q31: { text: "Addressing 'inclusiveness' in civics and ethics aims to:", choices: { A: 'Maintain traditional gender roles in public and private life.', B: "Focus solely on increasing women's quotas in formal politics.", C: 'Nurture equitable relations, recognizing gender differences in all spheres.', D: 'Exclude discussions of gender from the curriculum.' } },
            q32: { text: "Civic education's contribution to 'peace-building' involves developing competencies in:", choices: { A: 'Military strategy and tactics.', B: 'Economic negotiation and trade deals.', C: 'Peacemaking, non-violent conflict resolution, and reconciliation.', D: 'Suppression of dissent and opposition.' } },
            q33: { text: 'A core value promoted by Moral and Civics Education, listed explicitly, is:', choices: { A: 'Pursuit of individual wealth above all else.', B: 'Unquestioning obedience to authority.', C: 'Respect for diversity.', D: 'Strict adherence to tradition.' } },
            q34: { text: 'democracy requires ___________ from its citizens for it to be vibrant.', choices: { A: 'Apathy and disengagement', B: 'Financial contributions only', C: 'Engagement and participation', D: 'Uniformity of opinion' } },
            q35: { text: 'The need to "revitalize" citizenship education stems partly from:', choices: { A: 'An overemphasis on active participation in the past.', B: 'A perceived neglect of the field and the need for democratic citizenship focus.', C: 'The success of purely teacher-centered instruction methods.', D: 'The irrelevance of civics in modern society.' } },
            q36: { text: 'The chapter summary defines morality broadly as a set of:', choices: { A: 'Legally binding regulations only.', B: 'Personal and social values, rules, and beliefs governing conduct.', C: 'Innate instincts shared by all humans.', D: 'Philosophical arguments understandable only by experts.' } },
            q37: { text: 'A major goal of civics and ethics, reiterated in the summary, is producing citizens who:', choices: { A: 'Question all forms of authority.', B: 'Prioritize personal interests over societal needs.', C: 'Obey the law and contribute positively to society.', D: 'Focus exclusively on theoretical knowledge.' } },
            q38: { text: 'Invoking Socrates\' idea of the "unexamined life" in the context of ethics education highlights the value of:', choices: { A: 'Accepting dogma without question.', B: 'Avoiding difficult life experiences.', C: 'Self-critique and ethical reflection.', D: 'Focusing solely on practical skills.' } },
            q39: { text: 'The "new vision for education" mentioned in the summary advocates for a shift from rote learning towards:', choices: { A: 'Memorization of historical facts.', B: 'Skills acquisition relevant for life and society.', C: 'Theoretical philosophical debates.', D: 'Physical education and sports.' } },
            q40: { text: 'The ultimate aim of this type of ethics education, according to the summary, is the emergence of:', choices: { A: 'Citizens focused solely on national traditions.', B: 'Leaders driven by values, virtues, and knowledge to transform their environment.', C: 'Individuals skilled in manipulation for personal gain.', D: 'A society where ethics is determined solely by the majority opinion.' } },
            q41: { text: 'The quote by Louis Gottschalk, "A Seed will only become a flower if it gets sun and water," metaphorically suggests that:', choices: { A: 'Citizenship requires specific external conditions to flourish.', B: 'Human potential is fixed from birth.', C: 'Education is unnecessary for development.', D: 'Nature is the only determinant of character.' } },
            q42: { text: "Aristotle's view that citizens should be educated to suit the constitution implies:", choices: { A: "Education should be independent of the state's political structure.", B: "The purpose of civic education is aligned with the state's foundational principles.", C: 'Constitutions are obstacles to proper education.', D: 'Only philosophers should understand the constitution.' } },
            q43: { text: "Aggarwal's (1982) perspective links civic education to the development of:", choices: { A: 'Financial wealth and independence.', B: 'Ideas, habits, behaviors, and attitudes for useful societal membership.', C: 'Advanced technological proficiency.', D: 'Critical perspectives against the state.' } },
            q44: { text: "The distinction between ethical 'should' and psychological 'would' emphasizes that ethics is primarily:", choices: { A: 'Descriptive (what people do).', B: 'Predictive (what people will do).', C: 'Normative (what people ought to do).', D: 'Explanatory (why people do things).' } },
            q45: { text: ' in a multicultural society like Ethiopia, understanding and applying morality can be complex due to:', choices: { A: 'The lack of any shared values.', B: 'The uniformity of cultural norms across all groups.', C: 'The diversity of cultural backgrounds and values.', D: 'The absence of a formal legal system.' } },
            q46: { text: "The relationship between an individual's health choices (diet, exercise) and the state's ability to provide healthcare illustrates the connection between:", choices: { A: 'Economic policy and foreign relations.', B: 'Citizen rights and citizen responsibilities.', C: 'Legal statutes and judicial precedent.', D: 'Political parties and election outcomes.' } },
            q47: { text: 'Teaching ethics is presented as necessary alongside teaching norms because:', choices: { A: 'Norms are sufficient on their own to ensure ethical behavior.', B: 'Obeying rules without understanding the underlying ethical reasons may not be sufficient.', C: 'Ethics is easier to teach than norms.', D: 'Norms and ethics are fundamentally opposed concepts.' } },
            q48: { text: 'The phrase "educating the mind without educating the heart is no education at all" (attributed to Aristotle) suggests that education should encompass:', choices: { A: 'Only intellectual development.', B: 'Only emotional development.', C: 'Both intellectual and moral/ethical development.', D: 'Physical training exclusively.' } },
            q49: { text: "The concept of 'competences' for active citizenship (knowledge, skills, attitudes, values) implies that being an effective citizen is:", choices: { A: 'A passive state of being.', B: 'Dependent solely on birth circumstances.', C: 'A multifaceted capability requiring various components.', D: 'Achieved simply by reaching voting age.' } },
            q50: { text: 'The overall purpose of including Moral and Citizenship Education in the curriculum appears to be:', choices: { A: 'To prepare students for specific vocational jobs.', B: 'To develop knowledgeable, ethical, responsible, and active citizens.', C: 'To focus solely on the historical development of the nation.', D: 'To train students in advanced philosophical argumentation.' } }
        };

        // **** Correct answers mapped to letters (Civics & Ethics) ****
        const correctAnswersMap = {
             q1: 'B', q2: 'C', q3: 'C', q4: 'C', q5: 'B',
             q6: 'C', q7: 'B', q8: 'C', q9: 'C', q10: 'B',
             q11: 'C', q12: 'C', q13: 'C', q14: 'B', q15: 'B',
             q16: 'A', q17: 'C', q18: 'C', q19: 'C', q20: 'B',
             q21: 'A', q22: 'C', q23: 'C', q24: 'B', q25: 'B',
             q26: 'B', q27: 'B', q28: 'C', q29: 'C', q30: 'C',
             q31: 'C', q32: 'C', q33: 'C', q34: 'C', q35: 'B',
             q36: 'B', q37: 'C', q38: 'C', q39: 'B', q40: 'B',
             q41: 'A', q42: 'B', q43: 'B', q44: 'C', q45: 'C',
             q46: 'B', q47: 'B', q48: 'C', q49: 'C', q50: 'B'
        };


        function checkLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const errorMessage = document.getElementById('login-error');
            const loginSection = document.getElementById('login-section');
            const quizForm = document.getElementById('quiz-form');

            const isValid = validCredentials.some(cred =>
                cred.username === username && cred.password === password
            );

            if (isValid) {
                errorMessage.classList.add('hidden');
                loginSection.classList.add('hidden');
                quizForm.classList.remove('hidden');
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function showReview() {
            const form = document.getElementById('mcie-quiz');
            formData = new FormData(form);
            const data = Object.fromEntries(formData);

             // Check if all questions are answered
             let allAnswered = true;
             for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 if (!data[`q${i}`]) {
                     allAnswered = false;
                     break;
                 }
             }

             if (!data.name || !data.id_number || !data.section || !data.email || !data.phone || !allAnswered) {
                 alert('Please fill in all personal information and answer all questions before submitting.');
                 return; // Stop the function if validation fails
             }

            // Store quiz data temporarily
            quizData = {
                name: data.name,
                id_number: data.id_number,
                section: data.section,
                email: data.email,
                phone: data.phone,
                answers: {},
                questions: allQuestionsData,
                chapter: CURRENT_QUIZ_CHAPTER, // Added chapter to quizData
                courseCode: COURSE_CODE // Added course code to quizData
            };

            // Construct the formatted chapter string for display
             const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`;


            // Populate answers dynamically
            let reviewHTML = `
                <p><strong>Name:</strong> ${data.name}</p>
                <p><strong>ID Number:</strong> ${data.id_number}</p>
                <p><strong>Section:</strong> ${data.section}</p>
                <p><strong>Email:</strong> ${data.email}</p>
                <p><strong>Phone Number:</strong> ${data.phone}</p>
                 <p><strong>Chapter:</strong> ${quizData.chapter}</p>
                 <p><strong>Course & Chapter:</strong> ${formattedCourseChapter}</p> <!-- Added formatted chapter to review display -->
                <hr>
                <h3>Your Answers:</h3>
            `;

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const qKey = `q${i}`;
                const userAnswer = data[qKey];
                quizData.answers[qKey] = userAnswer; // Store answer
                const questionInfo = allQuestionsData[qKey];
                const answerText = questionInfo.choices[userAnswer] || 'Not Answered';
                reviewHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer}) ${answerText}</p>`;
            }

            // Display review content
            const reviewContent = document.getElementById('review-content');
            reviewContent.innerHTML = reviewHTML;

            // Show review section
            document.getElementById('quiz-form').classList.add('hidden');
            document.getElementById('review-section').classList.remove('hidden');
        }

        function editForm() {
            document.getElementById('review-section').classList.add('hidden');
            document.getElementById('quiz-form').classList.remove('hidden');
        }

        function downloadResponse() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const pageWidth = doc.internal.pageSize.width;
            const margin = 10;
            const effectiveWidth = pageWidth - margin * 2;

             const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`; // Use from quizData


            doc.setFontSize(16);
            doc.text(`${formattedCourseChapter} Quiz Response`, pageWidth / 2, y, { align: 'center' }); // Updated Title
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += 7;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += 7;
            doc.text(`Section: ${quizData.section}`, margin, y); y += 7;
            doc.text(`Email: ${quizData.email}`, margin, y); y += 7;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 7;
            doc.text(`Chapter: ${quizData.chapter}`, margin, y); y += 7;
            doc.text(`Course & Chapter: ${formattedCourseChapter}`, margin, y); y += 10; // Added formatted chapter to PDF


            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const answerText = question.choices[userAnswer] || 'Not Answered';
                 const questionText = question.text;

                 // Estimate space needed for the question + answer
                 const questionLines = doc.splitTextToSize(`Question ${i}: ${questionText}`, effectiveWidth);
                 const answerLines = doc.splitTextToSize(`Your answer: ${userAnswer}) ${answerText}`, effectiveWidth);
                 const spaceNeeded = (questionLines.length * 5) + 2 + (answerLines.length * 5) + 5;

                 if (y + spaceNeeded > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                 }

                doc.setFont('helvetica', 'bold');
                doc.text(questionLines, margin, y);
                y += (questionLines.length * 5) + 2;
                doc.setFont('helvetica', 'normal');

                if (y > pageHeight - margin) { doc.addPage(); y = margin; }

                doc.text(answerLines, margin, y);
                y += (answerLines.length * 5) + 5;

            }

            // Updated filename
            doc.save(`${formattedCourseChapter.replace(/ /g, '_')}_response_${quizData.id_number}.pdf`);
        }

        // --- MODIFIED: confirmSubmission Function ---
        async function confirmSubmission() {
            if (confirm('Are you sure you want to submit your answers?')) {
                if (!quizData || !formData) {
                     console.error("Quiz data or form data is missing.");
                     alert("Error: Cannot submit. Please try filling the form again.");
                     editForm(); // Go back to edit
                     return;
                }

                const data = Object.fromEntries(formData);

                // Calculate score
                let score = 0;
                for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                    const qKey = `q${i}`;
                    if (data[qKey] === correctAnswersMap[qKey]) {
                        score++;
                    }
                }

                // Update quizData with score (Optional but good practice)
                quizData.score = score;

                // *** CONSTRUCT THE FORMATTED CHAPTER STRING ***
                const formattedCourseChapter = `${COURSE_CODE} Chapter ${CURRENT_QUIZ_CHAPTER}`; // Use the constants


                // Prepare data for YOUR backend
                const submissionData = {
                    name: data.name,
                    id_number: data.id_number,
                    section: data.section,
                    email: data.email,
                    phone: data.phone,
                    score: score,
                    totalQuestions: TOTAL_QUESTIONS,
                    quizChapter: CURRENT_QUIZ_CHAPTER, // Keep the integer
                    // quizTitle: "Civics and Ethics Quiz",
                    // submittedAt: new Date().toISOString(),
                    // answers: quizData.answers // You can add this if your backend table had a jsonb column for answers

                    // *** ADD THE NEW FIELD WITH THE FORMATTED STRING ***
                    course_chapter_formatted: formattedCourseChapter,
                };

                console.log("Submitting quiz data:", submissionData);

                try {
                    // Show "Submitting..." message or spinner here if desired

                    const response = await fetch('/submit-quiz', { // Point to your backend endpoint
                        method: 'POST',
                        body: JSON.stringify(submissionData), // Send the data as JSON
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json' // Important Header!
                        }
                    });

                    if (response.ok) {
                        const result = await response.json();
                        console.log('Submission successful:', result);
                        alert("Quiz submitted successfully!"); // Provide feedback to user

                        // Show submission copy
                        const submissionContent = document.getElementById('submission-content');
                         let submissionHTML = `
                            <p><strong>Name:</strong> ${quizData.name}</p>
                            <p><strong>ID Number:</strong> ${quizData.id_number}</p>
                            <p><strong>Section:</strong> ${quizData.section}</p>
                            <p><strong>Email:</strong> ${quizData.email}</p>
                            <p><strong>Phone Number:</strong> ${quizData.phone}</p>
                            <p><strong>Chapter:</strong> ${quizData.chapter}</p>
                             <p><strong>Course & Chapter:</strong> ${formattedCourseChapter}</p> <!-- Added formatted chapter to submission copy -->
                            <hr>
                            <h3>Submitted Answers:</h3>
                        `;
                         for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                             const qKey = `q${i}`;
                             const questionInfo = quizData.questions[qKey];
                             const userAnswer = quizData.answers[qKey];
                             const answerText = questionInfo.choices[userAnswer] || 'Not Answered';
                             submissionHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer}) ${answerText}</p>`;
                         }
                        submissionContent.innerHTML = submissionHTML;

                        document.getElementById('review-section').classList.add('hidden');
                        document.getElementById('submission-copy').classList.remove('hidden');


                    } else {
                        let errorMsg = `Submission failed with status: ${response.status}`;
                        try {
                            const errorData = await response.json();
                            errorMsg = errorData.error || errorData.message || errorMsg;
                        } catch(e) { /* Ignore if response isn't JSON */ }

                        console.error('Backend submission error:', errorMsg);
                        document.getElementById('error-message').innerHTML = `<p>Submission failed: ${errorMsg}. Please try again.</p>`;
                        document.getElementById('error-message').classList.remove('hidden');
                        document.getElementById('review-section').classList.add('hidden');
                    }
                } catch (error) {
                    console.error('Network/Fetch error:', error);
                    document.getElementById('error-message').innerHTML = `<p>An network error occurred during submission. Please check your connection and try again.</p>`;
                    document.getElementById('error-message').classList.remove('hidden');
                    document.getElementById('review-section').classList.add('hidden');
                }
            }
        }


        function proceedToPassword() {
            document.getElementById('submission-copy').classList.add('hidden');
            document.getElementById('password-section').classList.remove('hidden');
        }

        function checkPassword() {
            const passwordInput = document.getElementById('password').value;
            const correctPassword = 'password'; // Keep the simple password
            const errorMessage = document.getElementById('password-error');
            const passwordSection = document.getElementById('password-section');
            const results = document.getElementById('results');

            if (passwordInput === correctPassword) {
                errorMessage.classList.add('hidden');
                passwordSection.classList.add('hidden');
                results.classList.remove('hidden');
                displayResults();
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function displayResults() {
            if (!quizData) {
                document.getElementById('results').innerHTML = '<p>Error: No quiz data found. Please complete the quiz first.</p>';
                return;
            }

             // Combine correct answer letter with full text for display
             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey].choices[correctLetter];
                 displayCorrectAnswers[qKey] = `${correctLetter}) ${correctText}`;
             }

            const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`; // Use from quizData

            // Added formatted chapter to results display
            document.getElementById('student-info').innerHTML = `<strong>Name:</strong> ${quizData.name}<br><strong>ID:</strong> ${quizData.id_number}<br><strong>Section:</strong> ${quizData.section}<br><strong>Email:</strong> ${quizData.email}<br><strong>Phone:</strong> ${quizData.phone}<br><strong>Chapter:</strong> ${quizData.chapter}<br><strong>Course & Chapter:</strong> ${formattedCourseChapter}`;


            const answersDiv = document.getElementById('answers');
            let answersHTML = '<h3>Detailed Results:</h3>';

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const userAnswerText = question.choices[userAnswer] || 'Not Answered';
                 const isCorrect = userAnswer === correctAnswersMap[qKey];

                 answersHTML += `
                    <div class="question-result">
                        <p><strong>Question ${i}:</strong> ${question.text}</p>
                        <div class="choices" style="font-size:0.9em; margin-left: 15px;">
                            <p>A) ${question.choices.A}</p>
                            <p>B) ${question.choices.B}</p>
                            <p>C) ${question.choices.C}</p>
                            <p>D) ${question.choices.D}</p>
                        </div>
                        <p>Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '<span style="color:green; font-weight:bold;">(Correct)</span>' : '<span style="color:red; font-weight:bold;">(Incorrect)</span>'}</p>
                        ${!isCorrect ? `<p style="color:blue;">Correct answer: ${displayCorrectAnswers[qKey]}</p>` : ''}
                    </div>
                `;
            }
            answersDiv.innerHTML = answersHTML;


            document.getElementById('score').textContent = `Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`;
        }

        function downloadPDF() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const pageWidth = doc.internal.pageSize.width;
            const margin = 10;
            const effectiveWidth = pageWidth - margin * 2;

             // Combine correct answer letter with full text for display
             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey].choices[correctLetter];
                 displayCorrectAnswers[qKey] = `${correctLetter}) ${correctText}`;
             }

            const formattedCourseChapter = `${quizData.courseCode} Chapter ${quizData.chapter}`; // Use from quizData

            doc.setFontSize(16);
            doc.text(`${formattedCourseChapter} Quiz Results`, pageWidth / 2, y, { align: 'center' }); // Updated Title
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += 7;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += 7;
            doc.text(`Section: ${quizData.section}`, margin, y); y += 7;
            doc.text(`Email: ${quizData.email}`, margin, y); y += 7;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 7;
             // Added formatted chapter to PDF
            doc.text(`Course & Chapter: ${formattedCourseChapter}`, margin, y); y += 10;


            doc.setFont('helvetica', 'bold');
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, pageWidth / 2, y, { align: 'center' });
            y += 10;
            doc.setFont('helvetica', 'normal');


            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const userAnswerText = question.choices[userAnswer] || 'Not Answered';
                 const isCorrect = userAnswer === correctAnswersMap[qKey];
                 const questionText = question.text;
                 const correctAnswerFull = displayCorrectAnswers[qKey];

                 // Estimate space needed
                 const qLines = doc.splitTextToSize(`Question ${i}: ${questionText}`, effectiveWidth);
                 const choicesLines = 4 * 5; // Estimate for 4 choices at 5 units per line height
                 const yourAnsLines = doc.splitTextToSize(`Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '(Correct)' : '(Incorrect)'}`, effectiveWidth);
                 const correctAnsLinesHeight = isCorrect ? 0 : doc.splitTextToSize(`Correct answer: ${correctAnswerFull}`, effectiveWidth).length * 5; // Height needed for correct answer if wrong
                 const spaceNeeded = (qLines.length * 5) + 2 + choicesLines + 7 + (yourAnsLines.length * 5) + 7 + correctAnsLinesHeight + 5;


                 if (y + spaceNeeded > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                }

                doc.setFont('helvetica', 'bold');
                doc.text(qLines, margin, y);
                y += (qLines.length * 5) + 2;
                doc.setFont('helvetica', 'normal');

                 const remainingSpaceAfterQuestion = pageHeight - margin - y;
                 const answersSectionSpace = choicesLines + 7 + (yourAnsLines.length * 5) + 7 + correctAnsLinesHeight + 5;

                 if (answersSectionSpace > remainingSpaceAfterQuestion) {
                     doc.addPage();
                     y = margin;
                 }


                doc.setFontSize(10);
                doc.text(`  A) ${question.choices.A}`, margin + 5, y); y += 5;
                doc.text(`  B) ${question.choices.B}`, margin + 5, y); y += 5;
                doc.text(`  C) ${question.choices.C}`, margin + 5, y); y += 5;
                doc.text(`  D) ${question.choices.D}`, margin + 5, y); y += 7;
                doc.setFontSize(12);


                doc.text(`Your answer: ${userAnswer}) ${userAnswerText} ${isCorrect ? '(Correct)' : '(Incorrect)'}`, margin, y); y += 7;

                if (!isCorrect) {
                    doc.setTextColor(0, 0, 255);
                    doc.text(`Correct answer: ${correctAnswerFull}`, margin, y); y += 7;
                    doc.setTextColor(0, 0, 0);
                }
                y += 5;

            }

            if (y > pageHeight - margin) { doc.addPage(); y = margin; }
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, pageWidth / 2, y, { align: 'center' });

            // Updated filename to include formatted chapter
            doc.save(`${formattedCourseChapter.replace(/ /g, '_')}_results_${quizData.id_number}.pdf`);
        }
    </script>
</body>
</html>
